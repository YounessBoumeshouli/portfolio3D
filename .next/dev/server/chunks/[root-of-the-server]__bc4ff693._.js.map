{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/boume/personalprojects/3d-portfolio/app/api/projects/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { parseReadme } from \"@/lib/readme-parser\"\r\nimport type { Project } from \"@/lib/types\"\r\n\r\nconst REPOSITORIES = [\"FillRouge\", \"RandomChess\", \"aero\"]\r\n\r\nexport async function GET() {\r\n    try {\r\n        const projects: Project[] = []\r\n\r\n        for (const repo of REPOSITORIES) {\r\n            const project = await fetchProjectData(repo)\r\n            if (project) projects.push(project)\r\n        }\r\n\r\n        return NextResponse.json(projects)\r\n    } catch (error) {\r\n        console.error(error)\r\n        return NextResponse.json(\r\n            { error: \"Failed to fetch projects\" },\r\n            { status: 500 }\r\n        )\r\n    }\r\n}\r\n\r\nasync function fetchProjectData(repoName: string): Promise<Project | null> {\r\n    const headers = {\r\n        Authorization: `Bearer ${process.env.GITHUB_TOKEN}`,\r\n        Accept: \"application/vnd.github.v3.raw\"\r\n    }\r\n\r\n    const base = `https://api.github.com/repos/${process.env.GITHUB_USERNAME}/${repoName}`\r\n\r\n    try {\r\n        // README\r\n        const readmeRes = await fetch(`${base}/readme`, { headers })\r\n        if (!readmeRes.ok) {\r\n            console.error(`Failed to fetch README for ${repoName}:`, readmeRes.status)\r\n            return null\r\n        }\r\n\r\n        const readmeContent = await readmeRes.text()\r\n        const readmeData = parseReadme(readmeContent)\r\n\r\n        // Repo metadata\r\n        const repoRes = await fetch(base, {\r\n            headers: {\r\n                Authorization: `Bearer ${process.env.GITHUB_TOKEN}`\r\n            }\r\n        })\r\n\r\n        if (!repoRes.ok) {\r\n            console.error(`Failed to fetch repo data for ${repoName}:`, repoRes.status)\r\n            return null\r\n        }\r\n\r\n        const repoData = await repoRes.json()\r\n\r\n        return {\r\n            id: repoData.id.toString(),\r\n            name: readmeData.title || repoData.name,\r\n            description: readmeData.description || repoData.description || \"\",\r\n            image: readmeData.image || \"/project-management-team.png\",\r\n            technologies: readmeData.technologies,\r\n            githubUrl: repoData.html_url,\r\n            liveUrl: readmeData.liveUrl,\r\n            owner: process.env.GITHUB_USERNAME!,\r\n            repo: repoName\r\n        }\r\n    } catch (error) {\r\n        console.error(`Error fetching project ${repoName}:`, error)\r\n        return null\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;;;;;;;;AAIA,MAAM,eAAe;IAAC;IAAa;IAAe;CAAO;AAElD,eAAe;IAClB,IAAI;QACA,MAAM,WAAsB,EAAE;QAE9B,KAAK,MAAM,QAAQ,aAAc;YAC7B,MAAM,UAAU,MAAM,iBAAiB;YACvC,IAAI,SAAS,SAAS,IAAI,CAAC;QAC/B;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAEA,eAAe,iBAAiB,QAAgB;IAC5C,MAAM,UAAU;QACZ,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,YAAY,EAAE;QACnD,QAAQ;IACZ;IAEA,MAAM,OAAO,CAAC,6BAA6B,EAAE,QAAQ,GAAG,CAAC,eAAe,CAAC,CAAC,EAAE,UAAU;IAEtF,IAAI;QACA,SAAS;QACT,MAAM,YAAY,MAAM,MAAM,GAAG,KAAK,OAAO,CAAC,EAAE;YAAE;QAAQ;QAC1D,IAAI,CAAC,UAAU,EAAE,EAAE;YACf,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,SAAS,CAAC,CAAC,EAAE,UAAU,MAAM;YACzE,OAAO;QACX;QAEA,MAAM,gBAAgB,MAAM,UAAU,IAAI;QAC1C,MAAM,aAAa,YAAY;QAE/B,gBAAgB;QAChB,MAAM,UAAU,MAAM,MAAM,MAAM;YAC9B,SAAS;gBACL,eAAe,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,YAAY,EAAE;YACvD;QACJ;QAEA,IAAI,CAAC,QAAQ,EAAE,EAAE;YACb,QAAQ,KAAK,CAAC,CAAC,8BAA8B,EAAE,SAAS,CAAC,CAAC,EAAE,QAAQ,MAAM;YAC1E,OAAO;QACX;QAEA,MAAM,WAAW,MAAM,QAAQ,IAAI;QAEnC,OAAO;YACH,IAAI,SAAS,EAAE,CAAC,QAAQ;YACxB,MAAM,WAAW,KAAK,IAAI,SAAS,IAAI;YACvC,aAAa,WAAW,WAAW,IAAI,SAAS,WAAW,IAAI;YAC/D,OAAO,WAAW,KAAK,IAAI;YAC3B,cAAc,WAAW,YAAY;YACrC,WAAW,SAAS,QAAQ;YAC5B,SAAS,WAAW,OAAO;YAC3B,OAAO,QAAQ,GAAG,CAAC,eAAe;YAClC,MAAM;QACV;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC,EAAE;QACrD,OAAO;IACX;AACJ"}}]
}